#summary Getting started with mod_spdy.

= Introduction =

To install mod_spdy you will also need to install a version of mod_ssl with NPN support enabled.

= Details =

== 1. Build mod_ssl with NPN support ==

You may have a version of mod_ssl.so on your system already. You'll need to build a more recent version from Apache and OpenSSL source and apply a patch to each to enable NPN support. This is taken care of by the `build_modssl_with_npn.sh` script:

{{{
mkdir modssl
cd modssl
svn export http://mod-spdy.googlecode.com/svn/trunk/src/build_modssl_with_npn.sh
./build_modssl_with_npn.sh 
}}}

Wait for the build to complete.

== 2. Install mod_ssl ==

Install mod_ssl.so in your Apache modules directory. This may be e.g. `/usr/lib/apache2/modules` if you are using Ubuntu, or some other location depending on your system.

Instructions for Ubuntu:
{{{
sudo cp mod_ssl.so /usr/lib/apache2/modules
sudo a2enmod ssl
}}}

== 3. Configure mod_ssl ==

Instructions for generating a self-signed certificate on Ubuntu:
{{{
sudo apt-get install ssl-cert
make-ssl-cert /usr/share/ssl-cert/ssleay.cnf /tmp/selfsigned.crt
# Enter your hostname. Any hostname will do for testing.
sudo mkdir /etc/apache2/ssl
sudo mv /tmp/selfsigned.crt /etc/apache2/ssl
emacs /etc/apache2/sites-enabled/default-ssl
 1. Find the line for SSLCertificateFile and update it to point at your new crt file.
 2. Comment out the line immediately following, for SSLCertificateKeyFile
sudo a2ensite default-ssl
}}}

Alternatively, you may wish to follow [http://www.tc.umn.edu/~brams006/selfsign.html this tutorial].

== 3.5. Verify mod_ssl is working ==

Restart Apache. On Ubuntu:
{{{
sudo /etc/init.d/apache2 restart
}}}

In any browser, navigate to https://yoursite/. If you are testing on localhost, try [https://127.0.0.1/].

== 4. Build mod_spdy ==

See HowToBuild.

== 5. Install mod_spdy ==

On Ubuntu, from the `src` directory of the mod_spdy build:

{{{
sudo cp out/Release/libmod_spdy.so /usr/lib/apache2/modules/mod_spdy.so
sudo echo "/usr/lib/apache2/modules/mod_spdy.so" > /etc/apache2/mods-available/spdy.load
sudo echo "SpdyEnabled on" > /etc/apache2/mods-available/spdy.conf
sudo a2enmod spdy
}}}

== 6. Restart Apache ==

On Ubuntu:
{{{
sudo /etc/init.d/apache2 restart
}}}

== 7. Verify in Google Chrome ==

Point your Google Chrome browser at your web site. Be sure to use an https URL. Open another tab and navigate to [chrome://net-internals], click the SPDY tab, and verify that your hostname appears in the table.

*NOTE:* The SPDY protocol is designed to fall back to SSL without SPDY if things are not working correctly, so it's important that you confirm that your hostname appears in the table in the SPDY tab. If it doesn't SPDY is not working. You can also check your apache `error.log` to see if mod_spdy was able to talk SPDY with Google Chrome.